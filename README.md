# BPS Directory Service
[Confluence](https://labs.mastercard.com/confluence_internal/display/bps/B2B+Directory+Service) | [Jenkins](https://labs.mastercard.com/jenkins_main/job/RND/job/bps/) | [Sonarqube](https://labs.mastercard.com/sonarqube/dashboard?id=com.mastercard.labs.bps%3Abps-service) | [Dev](http://dev4lab0.labs.mastercard.com:9987/) | [Demo Internal](http://dock4lab0.labs.mastercard.com:9987/) | [Demo External](https://demo.labs.mastercard.com/bps-directory)

BPS Directory Service

## Build

### API Model Generation

The REST service and interfaces are generated by Swagger Codegen using the the ```swagger.yaml``` file placed in the resources folder. 

To generate the model and interfaces run:

```bash
mvn clean
mvn compile
```

After this you should be able to run ```RESTServiceApplication.java```

### API Documentation
[demo env docs](https://demo.labs.mastercard.com/bps-directory/api/v0.1/swagger-ui.html#/) | [demo swagger](https://demo.labs.mastercard.com/bps-directory/api/v0.1/api-docs) | [postman collection](http://labs.mastercard.com/gitlab8/bps/bps-service/blob/bps-service/postman/BPS%20REST%20Service.postman_collection.json)

Access the following link to access the demo documentation:

```
{{host}}/bps-directory/api/v0.1/swagger-ui.html#/
```

### API Security - Keycloak

The API is secured using OAuth 2.0. The identity provider is Keycloak.

Each docker-compose.yaml pulls a Keycloak image built for BPS. You can find the image in the link below:

http://labs.mastercard.com/gitlab8/bps/bps-keycloak

#### Keycloak in Demo Env

In the demo environment, the Keycloak instance is exposed to the internet thru the "bps-auth" context path. Full link below.

https://demo.labs.mastercard.com/bps-auth/

## Deploy

The apps can be deployed to the Dev and Demo environments using Jenkins.

Both environments run Docker Swarm.

You can find the BPS [Jenkins Jobs here](https://labs.mastercard.com/jenkins_main/job/RND/job/bps/).

## Test

### Test Seed Data

You can populate the database by calling the  ```GET /seed``` endpoint.
The seed data being used can be found in the the persistence package.